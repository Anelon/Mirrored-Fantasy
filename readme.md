[ ] split gameloop into serverloop and clientloop
[ ] refactor map to canvas wrapper for client code and map in shared